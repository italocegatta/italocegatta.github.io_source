---
title: Os gráficos que explicam nossos dados (histograma)
date: 2016-07-15
author: Ítalo Cegatta
tags:
  - readxl
  - dplyr
  - ggplot2
  - ggthemes
categories:
  - Gráficos
thumbnailImage: http://i.imgur.com/K3yIExe.png
coverImage: http://i.imgur.com/uZgwJc6.png
thumbnailImagePosition: top
metaAlignment: center
coverMeta: out
---


<p>Histogramas são usados para mostrar a frequência com que uma variável ocorre. Isto é muito interessante para mostrar qual a distribuição dos seus dados e podemos apresentar em forma de frequência absoluta, relativa, percentual e acumulada. Para exemplificar este tipo gráfico, vamos utilizar os dados de inventário de uma propriedade fictícia na Amazônia. Estes dados são meramente ilustrativos e não tem valor real. O objetivo aqui é apresentar algumas particularidades da construção de gráficos de barras no R e facilitar a vida de quem quer abandonar os gráficos do Excel.</p>
<pre class="r"><code>if (!require(&quot;pacman&quot;)) install.packages(&quot;pacman&quot;)
pacman::p_load(readr, dplyr, ggplot2, ggthemes)</code></pre>
<pre class="r"><code>dados &lt;- read_csv2(&quot;https://goo.gl/ezA3hH&quot;)

dados</code></pre>
<pre><code>## # A tibble: 276 × 7
##             Especie              Nome_cientifico Comercial   DAP  HCom
##               &lt;chr&gt;                        &lt;chr&gt;     &lt;chr&gt; &lt;int&gt; &lt;int&gt;
## 1  NAO IDENTIFICADA             Nao Identificada       Nao    20    10
## 2            EMBIRA                Lecythidaceae       Nao    34    13
## 3  NAO IDENTIFICADA             Nao Identificada       Nao    18     6
## 4          SUCUPIRA   Leguminosae-Papilionoideae       Nao    18     7
## 5            CANELA                    Lauraceae       Nao    24    10
## 6             TACHI                Lecythidaceae       Sim    21    10
## 7       ENVIRA CAJU                   Annonaceae       Nao    20    11
## 8             JUTAI Leguminosae-Caesalpinioideae       Nao    38    13
## 9           CATUABA                 Vochysiaceae       Sim    57    13
## 10 NAO IDENTIFICADA             Nao Identificada       Nao    22     7
## # ... with 266 more rows, and 2 more variables: Volume &lt;dbl&gt;, QF &lt;int&gt;</code></pre>
<p>Primeiro vamos ver qual a distribuição dos indivíduos em classes de diâmetro. A Figura <a href="#fig:7-hist-dap">1</a> mostra a frequência de indivíduos em classes de diâmetro de 10 cm. Visivelmente, podemos ver que a faixa de diâmetro mais frequente está entre 15 e 35 cm (centro de classe 20 e 30 cm, respectivamente).</p>
<pre class="r"><code>ggplot(dados, aes(DAP)) +
  geom_histogram(binwidth = 10, color = &quot;white&quot;) +
  labs(x = &quot;Diâmetro (cm)&quot;, y = &quot;Frequência (arv/ha)&quot;) +
  scale_x_continuous(breaks = seq(0, 100,10)) +
  theme_few()</code></pre>
<div class="figure"><span id="fig:7-hist-dap"></span>
<img src="/post/2016-07-15-os-graficos-que-explicam-nossos-dados-histograma_files/figure-html/7-hist-dap-1.png" alt="Histograma com a frequência absoluta por classes de diâmetro." width="4000" />
<p class="caption">
Figura  1: Histograma com a frequência absoluta por classes de diâmetro.
</p>
</div>
<p>Mas, e quanto às espécies comerciais? Como elas estão distribuídas? A Figura <a href="#fig:7-hist-dap-comerc">2</a> faz esta diferenciação. E lembre-se, no manejo florestal da Amazônia só é permitido a exploração de árvores com diâmetro maior que 50 cm.</p>
<pre class="r"><code>ggplot(dados, aes(DAP, fill = Comercial)) +
  geom_histogram(binwidth = 10, color = &quot;white&quot;, alpha = 0.5) +
  labs(x = &quot;Diâmetro (cm)&quot;, y = &quot;Frequência (arv/ha)&quot;) +
  scale_x_continuous(breaks = seq(0, 100,10)) +
  theme_few() +
  theme(legend.position = c(.9, .9)) +
  scale_fill_hue(&quot;Comercial?&quot;, labels = c(&quot;Não&quot;, &quot;Sim&quot;))</code></pre>
<div class="figure"><span id="fig:7-hist-dap-comerc"></span>
<img src="/post/2016-07-15-os-graficos-que-explicam-nossos-dados-histograma_files/figure-html/7-hist-dap-comerc-1.png" alt="Histograma com a frequência absoluta por classes de diâmetro e separação pelo fator de árvores de interesse comercial." width="4000" />
<p class="caption">
Figura  2: Histograma com a frequência absoluta por classes de diâmetro e separação pelo fator de árvores de interesse comercial.
</p>
</div>
<p>Vamos melhorar um pouco mais a informação sob o ponto de vista da exploração: qual a frequência de indivíduos que são de interesse comercial e tem diâmetro mais que 50 cm? (Figura <a href="#fig:7-hist-vol-exp">3</a>).</p>
<pre class="r"><code>ggplot(dados, aes(Volume, fill = DAP &gt; 50 &amp; Comercial == &quot;Sim&quot;)) +
  geom_histogram(binwidth = 0.5, color = &quot;white&quot;, alpha = 0.5) +
  labs(x = Volume~individual ~ (m^3 / arv), y = &quot;Frequência (arv/ha)&quot;) +
  scale_y_continuous(breaks = seq(0, 150, 20)) +
  scale_x_continuous(breaks = seq(0, 10, 0.5)) +
  theme_few()  +
  theme(legend.position = c(.9, .9)) +
  scale_fill_hue(&quot;Pode explorar?&quot;, labels = c(&quot;Não&quot;, &quot;Sim&quot;))</code></pre>
<div class="figure"><span id="fig:7-hist-vol-exp"></span>
<img src="/post/2016-07-15-os-graficos-que-explicam-nossos-dados-histograma_files/figure-html/7-hist-vol-exp-1.png" alt="Histograma com a frequência absoluta por classes de volume individual e separação pelo fator de árvores de interesse comercial e diâmetro maior que 50 cm." width="4000" />
<p class="caption">
Figura  3: Histograma com a frequência absoluta por classes de volume individual e separação pelo fator de árvores de interesse comercial e diâmetro maior que 50 cm.
</p>
</div>
<p>Se quisermos ainda apresentar o gráfico em termos das frequências relativas, podemos fazer a seguinte modificação, conforme a Figura <a href="#fig:7-hist-vol-exp-rel">4</a>.</p>
<pre class="r"><code>ggplot(dados, aes(Volume, fill = DAP &gt; 50 &amp; Comercial == &quot;Sim&quot;)) +
  geom_histogram(
    aes(y = ..count../sum(..count..)),
    binwidth = 0.5, color = &quot;white&quot;, alpha = 0.5
  ) +
  labs(x =  Volume~individual ~ (m^3 / arv), y = &quot;Frequência (arv/ha)&quot;) +
  scale_y_continuous(breaks = seq(0, .5, 0.05), labels = scales::percent) +
  scale_x_continuous(breaks = seq(0, 10, 0.5)) +
  theme_few()  +
  theme(legend.position = c(.9, .9)) +
  scale_fill_hue(&quot;Pode explorar?&quot;, labels = c(&quot;Não&quot;, &quot;Sim&quot;))</code></pre>
<div class="figure"><span id="fig:7-hist-vol-exp-rel"></span>
<img src="/post/2016-07-15-os-graficos-que-explicam-nossos-dados-histograma_files/figure-html/7-hist-vol-exp-rel-1.png" alt="Histograma com a frequência relativa por classes de volume individual e separação pelo fator de árvores de interesse comercial e diâmetro maior que 50 cm." width="4000" />
<p class="caption">
Figura  4: Histograma com a frequência relativa por classes de volume individual e separação pelo fator de árvores de interesse comercial e diâmetro maior que 50 cm.
</p>
</div>
<p>Caso tenha alguma dúvida ou sugestão sobre o post, fique à vontade para fazer um comentário ou me contactar por Email.</p>
